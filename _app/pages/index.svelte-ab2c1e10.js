import{S as ye,i as Se,s as we,e as _,k as Ce,c as ee,a as ue,d as X,m as Pe,b as K,g as te,J as Me,K as ce,n as ve,L as Ie,w as Ae,M as Te,N as Be}from"../chunks/index-5eba58fb.js";var q=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function xe(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}var ne={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(O,N){(function(R,x){O.exports=x()})(q,function(){return function(A){var R={};function x(e){if(R[e])return R[e].exports;var l=R[e]={i:e,l:!1,exports:{}};return A[e].call(l.exports,l,l.exports,x),l.l=!0,l.exports}return x.m=A,x.c=R,x.d=function(e,l,r){x.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:r})},x.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},x.t=function(e,l){if(l&1&&(e=x(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(x.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var i in e)x.d(r,i,function(c){return e[c]}.bind(null,i));return r},x.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return x.d(l,"a",l),l},x.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},x.p="",x(x.s=21)}([function(A,R){var x={};A.exports=x,function(){x._nextId=0,x._seed=0,x._nowStartTime=+new Date,x._warnedOnce={},x._decomp=null,x.extend=function(l,r){var i,c;typeof r=="boolean"?(i=2,c=r):(i=1,c=!0);for(var o=i;o<arguments.length;o++){var f=arguments[o];if(f)for(var n in f)c&&f[n]&&f[n].constructor===Object&&(!l[n]||l[n].constructor===Object)?(l[n]=l[n]||{},x.extend(l[n],c,f[n])):l[n]=f[n]}return l},x.clone=function(l,r){return x.extend({},r,l)},x.keys=function(l){if(Object.keys)return Object.keys(l);var r=[];for(var i in l)r.push(i);return r},x.values=function(l){var r=[];if(Object.keys){for(var i=Object.keys(l),c=0;c<i.length;c++)r.push(l[i[c]]);return r}for(var o in l)r.push(l[o]);return r},x.get=function(l,r,i,c){r=r.split(".").slice(i,c);for(var o=0;o<r.length;o+=1)l=l[r[o]];return l},x.set=function(l,r,i,c,o){var f=r.split(".").slice(c,o);return x.get(l,r,0,-1)[f[f.length-1]]=i,i},x.shuffle=function(l){for(var r=l.length-1;r>0;r--){var i=Math.floor(x.random()*(r+1)),c=l[r];l[r]=l[i],l[i]=c}return l},x.choose=function(l){return l[Math.floor(x.random()*l.length)]},x.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},x.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},x.isFunction=function(l){return typeof l=="function"},x.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},x.isString=function(l){return toString.call(l)==="[object String]"},x.clamp=function(l,r,i){return l<r?r:l>i?i:l},x.sign=function(l){return l<0?-1:1},x.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-x._nowStartTime},x.random=function(l,r){return l=typeof l!="undefined"?l:0,r=typeof r!="undefined"?r:1,l+e()*(r-l)};var e=function(){return x._seed=(x._seed*9301+49297)%233280,x._seed/233280};x.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},x.logLevel=1,x.log=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.info=function(){console&&x.logLevel>0&&x.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warn=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");x._warnedOnce[l]||(x.warn(l),x._warnedOnce[l]=!0)},x.deprecated=function(l,r,i){l[r]=x.chain(function(){x.warnOnce("\u{1F505} deprecated \u{1F505}",i)},l[r])},x.nextId=function(){return x._nextId++},x.indexOf=function(l,r){if(l.indexOf)return l.indexOf(r);for(var i=0;i<l.length;i++)if(l[i]===r)return i;return-1},x.map=function(l,r){if(l.map)return l.map(r);for(var i=[],c=0;c<l.length;c+=1)i.push(r(l[c]));return i},x.topologicalSort=function(l){var r=[],i=[],c=[];for(var o in l)!i[o]&&!c[o]&&x._topologicalSort(o,i,c,l,r);return r},x._topologicalSort=function(l,r,i,c,o){var f=c[l]||[];i[l]=!0;for(var n=0;n<f.length;n+=1){var t=f[n];i[t]||r[t]||x._topologicalSort(t,r,i,c,o)}i[l]=!1,r[l]=!0,o.push(l)},x.chain=function(){for(var l=[],r=0;r<arguments.length;r+=1){var i=arguments[r];i._chained?l.push.apply(l,i._chained):l.push(i)}var c=function(){for(var o,f=new Array(arguments.length),n=0,t=arguments.length;n<t;n++)f[n]=arguments[n];for(n=0;n<l.length;n+=1){var a=l[n].apply(o,f);typeof a!="undefined"&&(o=a)}return o};return c._chained=l,c},x.chainPathBefore=function(l,r,i){return x.set(l,r,x.chain(i,x.get(l,r)))},x.chainPathAfter=function(l,r,i){return x.set(l,r,x.chain(x.get(l,r),i))},x.setDecomp=function(l){x._decomp=l},x.getDecomp=function(){var l=x._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof q!="undefined"&&(l=q.decomp)}catch{l=null}return l}}()},function(A,R){var x={};A.exports=x,function(){x.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&x.update(l,e),l},x.update=function(e,l,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<l.length;i++){var c=l[i];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},x.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},x.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},x.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},x.shift=function(e,l){var r=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+r,e.min.y=l.y,e.max.y=l.y+i}}()},function(A,R){var x={};A.exports=x,function(){x.create=function(e,l){return{x:e||0,y:l||0}},x.clone=function(e){return{x:e.x,y:e.y}},x.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},x.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},x.rotate=function(e,l,r){var i=Math.cos(l),c=Math.sin(l);r||(r={});var o=e.x*i-e.y*c;return r.y=e.x*c+e.y*i,r.x=o,r},x.rotateAbout=function(e,l,r,i){var c=Math.cos(l),o=Math.sin(l);i||(i={});var f=r.x+((e.x-r.x)*c-(e.y-r.y)*o);return i.y=r.y+((e.x-r.x)*o+(e.y-r.y)*c),i.x=f,i},x.normalise=function(e){var l=x.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},x.dot=function(e,l){return e.x*l.x+e.y*l.y},x.cross=function(e,l){return e.x*l.y-e.y*l.x},x.cross3=function(e,l,r){return(l.x-e.x)*(r.y-e.y)-(l.y-e.y)*(r.x-e.x)},x.add=function(e,l,r){return r||(r={}),r.x=e.x+l.x,r.y=e.y+l.y,r},x.sub=function(e,l,r){return r||(r={}),r.x=e.x-l.x,r.y=e.y-l.y,r},x.mult=function(e,l){return{x:e.x*l,y:e.y*l}},x.div=function(e,l){return{x:e.x/l,y:e.y/l}},x.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},x.neg=function(e){return{x:-e.x,y:-e.y}},x.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},x._temp=[x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]}()},function(A,R,x){var e={};A.exports=e;var l=x(2),r=x(0);(function(){e.create=function(i,c){for(var o=[],f=0;f<i.length;f++){var n=i[f],t={x:n.x,y:n.y,index:f,body:c,isInternal:!1};o.push(t)}return o},e.fromPath=function(i,c){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(o,function(n,t,a){f.push({x:parseFloat(t),y:parseFloat(a)})}),e.create(f,c)},e.centre=function(i){for(var c=e.area(i,!0),o={x:0,y:0},f,n,t,a=0;a<i.length;a++)t=(a+1)%i.length,f=l.cross(i[a],i[t]),n=l.mult(l.add(i[a],i[t]),f),o=l.add(o,n);return l.div(o,6*c)},e.mean=function(i){for(var c={x:0,y:0},o=0;o<i.length;o++)c.x+=i[o].x,c.y+=i[o].y;return l.div(c,i.length)},e.area=function(i,c){for(var o=0,f=i.length-1,n=0;n<i.length;n++)o+=(i[f].x-i[n].x)*(i[f].y+i[n].y),f=n;return c?o/2:Math.abs(o)/2},e.inertia=function(i,c){for(var o=0,f=0,n=i,t,a,s=0;s<n.length;s++)a=(s+1)%n.length,t=Math.abs(l.cross(n[a],n[s])),o+=t*(l.dot(n[a],n[a])+l.dot(n[a],n[s])+l.dot(n[s],n[s])),f+=t;return c/6*(o/f)},e.translate=function(i,c,o){o=typeof o!="undefined"?o:1;var f=i.length,n=c.x*o,t=c.y*o,a;for(a=0;a<f;a++)i[a].x+=n,i[a].y+=t;return i},e.rotate=function(i,c,o){if(c!==0){var f=Math.cos(c),n=Math.sin(c),t=o.x,a=o.y,s=i.length,v,p,C,w;for(w=0;w<s;w++)v=i[w],p=v.x-t,C=v.y-a,v.x=t+(p*f-C*n),v.y=a+(p*n+C*f);return i}},e.contains=function(i,c){for(var o=c.x,f=c.y,n=i.length,t=i[n-1],a,s=0;s<n;s++){if(a=i[s],(o-t.x)*(a.y-t.y)+(f-t.y)*(t.x-a.x)>0)return!1;t=a}return!0},e.scale=function(i,c,o,f){if(c===1&&o===1)return i;f=f||e.centre(i);for(var n,t,a=0;a<i.length;a++)n=i[a],t=l.sub(n,f),i[a].x=f.x+t.x*c,i[a].y=f.y+t.y*o;return i},e.chamfer=function(i,c,o,f,n){typeof c=="number"?c=[c]:c=c||[8],o=typeof o!="undefined"?o:-1,f=f||2,n=n||14;for(var t=[],a=0;a<i.length;a++){var s=i[a-1>=0?a-1:i.length-1],v=i[a],p=i[(a+1)%i.length],C=c[a<c.length?a:c.length-1];if(C===0){t.push(v);continue}var w=l.normalise({x:v.y-s.y,y:s.x-v.x}),u=l.normalise({x:p.y-v.y,y:v.x-p.x}),g=Math.sqrt(2*Math.pow(C,2)),m=l.mult(r.clone(w),C),h=l.normalise(l.mult(l.add(w,u),.5)),S=l.sub(v,l.mult(h,g)),y=o;o===-1&&(y=Math.pow(C,.32)*1.75),y=r.clamp(y,f,n),y%2===1&&(y+=1);for(var P=Math.acos(l.dot(w,u)),d=P/y,M=0;M<y;M++)t.push(l.add(l.rotate(m,d*M),S))}return t},e.clockwiseSort=function(i){var c=e.mean(i);return i.sort(function(o,f){return l.angle(c,o)-l.angle(c,f)}),i},e.isConvex=function(i){var c=0,o=i.length,f,n,t,a;if(o<3)return null;for(f=0;f<o;f++)if(n=(f+1)%o,t=(f+2)%o,a=(i[n].x-i[f].x)*(i[t].y-i[n].y),a-=(i[n].y-i[f].y)*(i[t].x-i[n].x),a<0?c|=1:a>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(i){var c=[],o=[],f,n;for(i=i.slice(0),i.sort(function(t,a){var s=t.x-a.x;return s!==0?s:t.y-a.y}),n=0;n<i.length;n+=1){for(f=i[n];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],f)<=0;)o.pop();o.push(f)}for(n=i.length-1;n>=0;n-=1){for(f=i[n];c.length>=2&&l.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),o.pop(),c.concat(o)}})()},function(A,R,x){var e={};A.exports=e;var l=x(0);(function(){e.on=function(r,i,c){for(var o=i.split(" "),f,n=0;n<o.length;n++)f=o[n],r.events=r.events||{},r.events[f]=r.events[f]||[],r.events[f].push(c);return c},e.off=function(r,i,c){if(!i){r.events={};return}typeof i=="function"&&(c=i,i=l.keys(r.events).join(" "));for(var o=i.split(" "),f=0;f<o.length;f++){var n=r.events[o[f]],t=[];if(c&&n)for(var a=0;a<n.length;a++)n[a]!==c&&t.push(n[a]);r.events[o[f]]=t}},e.trigger=function(r,i,c){var o,f,n,t,a=r.events;if(a&&l.keys(a).length>0){c||(c={}),o=i.split(" ");for(var s=0;s<o.length;s++)if(f=o[s],n=a[f],n){t=l.clone(c,!1),t.name=f,t.source=r;for(var v=0;v<n.length;v++)n[v].apply(r,[t])}}}})()},function(A,R,x){var e={};A.exports=e;var l=x(4),r=x(0),i=x(1),c=x(6);(function(){e.create=function(o){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,f,n,t){if(o.isModified=f,f&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),n&&o.parent&&e.setModified(o.parent,f,n,t),t)for(var a=0;a<o.composites.length;a++){var s=o.composites[a];e.setModified(s,f,n,t)}},e.add=function(o,f){var n=[].concat(f);l.trigger(o,"beforeAdd",{object:f});for(var t=0;t<n.length;t++){var a=n[t];switch(a.type){case"body":if(a.parent!==a){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,a);break;case"constraint":e.addConstraint(o,a);break;case"composite":e.addComposite(o,a);break;case"mouseConstraint":e.addConstraint(o,a.constraint);break}}return l.trigger(o,"afterAdd",{object:f}),o},e.remove=function(o,f,n){var t=[].concat(f);l.trigger(o,"beforeRemove",{object:f});for(var a=0;a<t.length;a++){var s=t[a];switch(s.type){case"body":e.removeBody(o,s,n);break;case"constraint":e.removeConstraint(o,s,n);break;case"composite":e.removeComposite(o,s,n);break;case"mouseConstraint":e.removeConstraint(o,s.constraint);break}}return l.trigger(o,"afterRemove",{object:f}),o},e.addComposite=function(o,f){return o.composites.push(f),f.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,f,n){var t=r.indexOf(o.composites,f);if(t!==-1&&e.removeCompositeAt(o,t),n)for(var a=0;a<o.composites.length;a++)e.removeComposite(o.composites[a],f,!0);return o},e.removeCompositeAt=function(o,f){return o.composites.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,f){return o.bodies.push(f),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,f,n){var t=r.indexOf(o.bodies,f);if(t!==-1&&e.removeBodyAt(o,t),n)for(var a=0;a<o.composites.length;a++)e.removeBody(o.composites[a],f,!0);return o},e.removeBodyAt=function(o,f){return o.bodies.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,f){return o.constraints.push(f),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,f,n){var t=r.indexOf(o.constraints,f);if(t!==-1&&e.removeConstraintAt(o,t),n)for(var a=0;a<o.composites.length;a++)e.removeConstraint(o.composites[a],f,!0);return o},e.removeConstraintAt=function(o,f){return o.constraints.splice(f,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,f,n){if(n)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],f,!0);return f?o.bodies=o.bodies.filter(function(a){return a.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var f=[].concat(o.bodies),n=0;n<o.composites.length;n++)f=f.concat(e.allBodies(o.composites[n]));return o.cache&&(o.cache.allBodies=f),f},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var f=[].concat(o.constraints),n=0;n<o.composites.length;n++)f=f.concat(e.allConstraints(o.composites[n]));return o.cache&&(o.cache.allConstraints=f),f},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var f=[].concat(o.composites),n=0;n<o.composites.length;n++)f=f.concat(e.allComposites(o.composites[n]));return o.cache&&(o.cache.allComposites=f),f},e.get=function(o,f,n){var t,a;switch(n){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(a=t.filter(function(s){return s.id.toString()===f.toString()}),a.length===0?null:a[0]):null},e.move=function(o,f,n){return e.remove(o,f),e.add(n,f),o},e.rebase=function(o){for(var f=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),n=0;n<f.length;n++)f[n].id=r.nextId();return o},e.translate=function(o,f,n){for(var t=n?e.allBodies(o):o.bodies,a=0;a<t.length;a++)c.translate(t[a],f);return o},e.rotate=function(o,f,n,t){for(var a=Math.cos(f),s=Math.sin(f),v=t?e.allBodies(o):o.bodies,p=0;p<v.length;p++){var C=v[p],w=C.position.x-n.x,u=C.position.y-n.y;c.setPosition(C,{x:n.x+(w*a-u*s),y:n.y+(w*s+u*a)}),c.rotate(C,f)}return o},e.scale=function(o,f,n,t,a){for(var s=a?e.allBodies(o):o.bodies,v=0;v<s.length;v++){var p=s[v],C=p.position.x-t.x,w=p.position.y-t.y;c.setPosition(p,{x:t.x+C*f,y:t.y+w*n}),c.scale(p,f,n)}return o},e.bounds=function(o){for(var f=e.allBodies(o),n=[],t=0;t<f.length;t+=1){var a=f[t];n.push(a.bounds.min,a.bounds.max)}return i.create(n)}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(2),i=x(7);x(16);var c=x(0),o=x(1),f=x(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var a={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},s=c.extend(a,t);return n(s,t),s},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var n=function(t,a){a=a||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||r.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:a.axes||t.axes,area:a.area||t.area,mass:a.mass||t.mass,inertia:a.inertia||t.inertia});var s=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",p=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||s,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||p,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,a,s){var v;typeof a=="string"&&(v=a,a={},a[v]=s);for(v in a)if(!!Object.prototype.hasOwnProperty.call(a,v))switch(s=a[v],v){case"isStatic":e.setStatic(t,s);break;case"isSleeping":i.set(t,s);break;case"mass":e.setMass(t,s);break;case"density":e.setDensity(t,s);break;case"inertia":e.setInertia(t,s);break;case"vertices":e.setVertices(t,s);break;case"position":e.setPosition(t,s);break;case"angle":e.setAngle(t,s);break;case"velocity":e.setVelocity(t,s);break;case"angularVelocity":e.setAngularVelocity(t,s);break;case"parts":e.setParts(t,s);break;case"centre":e.setCentre(t,s);break;default:t[v]=s}},e.setStatic=function(t,a){for(var s=0;s<t.parts.length;s++){var v=t.parts[s];v.isStatic=a,a?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,a){var s=t.inertia/(t.mass/6);t.inertia=s*(a/6),t.inverseInertia=1/t.inertia,t.mass=a,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,a){e.setMass(t,a*t.area),t.density=a},e.setInertia=function(t,a){t.inertia=a,t.inverseInertia=1/t.inertia},e.setVertices=function(t,a){a[0].body===t?t.vertices=a:t.vertices=l.create(a,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var s=l.centre(t.vertices);l.translate(t.vertices,s,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,a,s){var v;for(a=a.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<a.length;v++){var p=a[v];p!==t&&(p.parent=t,t.parts.push(p))}if(t.parts.length!==1){if(s=typeof s!="undefined"?s:!0,s){var C=[];for(v=0;v<a.length;v++)C=C.concat(a[v].vertices);l.clockwiseSort(C);var w=l.hull(C),u=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,u)}var g=e._totalProperties(t);t.area=g.area,t.parent=t,t.position.x=g.centre.x,t.position.y=g.centre.y,t.positionPrev.x=g.centre.x,t.positionPrev.y=g.centre.y,e.setMass(t,g.mass),e.setInertia(t,g.inertia),e.setPosition(t,g.centre)}},e.setCentre=function(t,a,s){s?(t.positionPrev.x+=a.x,t.positionPrev.y+=a.y,t.position.x+=a.x,t.position.y+=a.y):(t.positionPrev.x=a.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=a.y-(t.position.y-t.positionPrev.y),t.position.x=a.x,t.position.y=a.y)},e.setPosition=function(t,a){var s=r.sub(a,t.position);t.positionPrev.x+=s.x,t.positionPrev.y+=s.y;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.position.x+=s.x,p.position.y+=s.y,l.translate(p.vertices,s),o.update(p.bounds,p.vertices,t.velocity)}},e.setAngle=function(t,a){var s=a-t.angle;t.anglePrev+=s;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.angle+=s,l.rotate(p.vertices,s,t.position),f.rotate(p.axes,s),o.update(p.bounds,p.vertices,t.velocity),v>0&&r.rotateAbout(p.position,s,t.position,p.position)}},e.setVelocity=function(t,a){t.positionPrev.x=t.position.x-a.x,t.positionPrev.y=t.position.y-a.y,t.velocity.x=a.x,t.velocity.y=a.y,t.speed=r.magnitude(t.velocity)},e.setAngularVelocity=function(t,a){t.anglePrev=t.angle-a,t.angularVelocity=a,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,a){e.setPosition(t,r.add(t.position,a))},e.rotate=function(t,a,s){if(!s)e.setAngle(t,t.angle+a);else{var v=Math.cos(a),p=Math.sin(a),C=t.position.x-s.x,w=t.position.y-s.y;e.setPosition(t,{x:s.x+(C*v-w*p),y:s.y+(C*p+w*v)}),e.setAngle(t,t.angle+a)}},e.scale=function(t,a,s,v){var p=0,C=0;v=v||t.position;for(var w=0;w<t.parts.length;w++){var u=t.parts[w];l.scale(u.vertices,a,s,v),u.axes=f.fromVertices(u.vertices),u.area=l.area(u.vertices),e.setMass(u,t.density*u.area),l.translate(u.vertices,{x:-u.position.x,y:-u.position.y}),e.setInertia(u,e._inertiaScale*l.inertia(u.vertices,u.mass)),l.translate(u.vertices,{x:u.position.x,y:u.position.y}),w>0&&(p+=u.area,C+=u.inertia),u.position.x=v.x+(u.position.x-v.x)*a,u.position.y=v.y+(u.position.y-v.y)*s,o.update(u.bounds,u.vertices,t.velocity)}t.parts.length>1&&(t.area=p,t.isStatic||(e.setMass(t,t.density*p),e.setInertia(t,C))),t.circleRadius&&(a===s?t.circleRadius*=a:t.circleRadius=null)},e.update=function(t,a,s,v){var p=Math.pow(a*s*t.timeScale,2),C=1-t.frictionAir*s*t.timeScale,w=t.position.x-t.positionPrev.x,u=t.position.y-t.positionPrev.y;t.velocity.x=w*C*v+t.force.x/t.mass*p,t.velocity.y=u*C*v+t.force.y/t.mass*p,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*v+t.torque/t.inertia*p,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=r.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var g=0;g<t.parts.length;g++){var m=t.parts[g];l.translate(m.vertices,t.velocity),g>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(m.vertices,t.angularVelocity,t.position),f.rotate(m.axes,t.angularVelocity),g>0&&r.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),o.update(m.bounds,m.vertices,t.velocity)}},e.applyForce=function(t,a,s){t.force.x+=s.x,t.force.y+=s.y;var v={x:a.x-t.position.x,y:a.y-t.position.y};t.torque+=v.x*s.y-v.y*s.x},e._totalProperties=function(t){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},s=t.parts.length===1?0:1;s<t.parts.length;s++){var v=t.parts[s],p=v.mass!==1/0?v.mass:1;a.mass+=p,a.area+=v.area,a.inertia+=v.inertia,a.centre=r.add(a.centre,r.mult(v.position,p))}return a.centre=r.div(a.centre,a.mass),a}})()},function(A,R,x){var e={};A.exports=e;var l=x(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(r,i){for(var c=i*i*i,o=0;o<r.length;o++){var f=r[o],n=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,n),a=Math.max(f.motion,n);f.motion=e._minBias*t+(1-e._minBias)*a,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(r,i){for(var c=i*i*i,o=0;o<r.length;o++){var f=r[o];if(!!f.isActive){var n=f.collision,t=n.bodyA.parent,a=n.bodyB.parent;if(!(t.isSleeping&&a.isSleeping||t.isStatic||a.isStatic)&&(t.isSleeping||a.isSleeping)){var s=t.isSleeping&&!t.isStatic?t:a,v=s===t?a:t;!s.isStatic&&v.motion>e._motionWakeThreshold*c&&e.set(s,!1)}}}},e.set=function(r,i){var c=r.isSleeping;i?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,c||l.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,c&&l.trigger(r,"sleepEnd"))}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(9);(function(){var i=[],c={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(f,n){return{pair:null,collided:!1,bodyA:f,bodyB:n,parentA:f.parent,parentB:n.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,n,t){if(e._overlapAxes(c,f.vertices,n.vertices,f.axes),c.overlap<=0||(e._overlapAxes(o,n.vertices,f.vertices,n.axes),o.overlap<=0))return null;var a=t&&t.table[r.id(f,n)],s;a?s=a.collision:(s=e.create(f,n),s.collided=!0,s.bodyA=f.id<n.id?f:n,s.bodyB=f.id<n.id?n:f,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent),f=s.bodyA,n=s.bodyB;var v;c.overlap<o.overlap?v=c:v=o;var p=s.normal,C=s.supports,w=v.axis,u=w.x,g=w.y;u*(n.position.x-f.position.x)+g*(n.position.y-f.position.y)<0?(p.x=u,p.y=g):(p.x=-u,p.y=-g),s.tangent.x=-p.y,s.tangent.y=p.x,s.depth=v.overlap,s.penetration.x=p.x*s.depth,s.penetration.y=p.y*s.depth;var m=e._findSupports(f,n,p,1),h=0;if(l.contains(f.vertices,m[0])&&(C[h++]=m[0]),l.contains(f.vertices,m[1])&&(C[h++]=m[1]),h<2){var S=e._findSupports(n,f,p,-1);l.contains(n.vertices,S[0])&&(C[h++]=S[0]),h<2&&l.contains(n.vertices,S[1])&&(C[h++]=S[1])}return h===0&&(C[h++]=m[0]),C.length=h,s},e._overlapAxes=function(f,n,t,a){var s=n.length,v=t.length,p=n[0].x,C=n[0].y,w=t[0].x,u=t[0].y,g=a.length,m=Number.MAX_VALUE,h=0,S,y,P,d,M,I;for(M=0;M<g;M++){var T=a[M],B=T.x,E=T.y,L=p*B+C*E,D=w*B+u*E,F=L,V=D;for(I=1;I<s;I+=1)d=n[I].x*B+n[I].y*E,d>F?F=d:d<L&&(L=d);for(I=1;I<v;I+=1)d=t[I].x*B+t[I].y*E,d>V?V=d:d<D&&(D=d);if(y=F-D,P=V-L,S=y<P?y:P,S<m&&(m=S,h=M,S<=0))break}f.axis=a[h],f.overlap=m},e._projectToAxis=function(f,n,t){for(var a=n[0].x*t.x+n[0].y*t.y,s=a,v=1;v<n.length;v+=1){var p=n[v].x*t.x+n[v].y*t.y;p>s?s=p:p<a&&(a=p)}f.min=a,f.max=s},e._findSupports=function(f,n,t,a){var s=n.vertices,v=s.length,p=f.position.x,C=f.position.y,w=t.x*a,u=t.y*a,g=Number.MAX_VALUE,m,h,S,y,P;for(P=0;P<v;P+=1)h=s[P],y=w*(p-h.x)+u*(C-h.y),y<g&&(g=y,m=h);return S=s[(v+m.index-1)%v],g=w*(p-S.x)+u*(C-S.y),h=s[(m.index+1)%v],w*(p-h.x)+u*(C-h.y)<g?(i[0]=m,i[1]=h,i):(i[0]=m,i[1]=S,i)}})()},function(A,R,x){var e={};A.exports=e;var l=x(17);(function(){e.create=function(r,i){var c=r.bodyA,o=r.bodyB,f={id:e.id(c,o),bodyA:c,bodyB:o,collision:r,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,r,i),f},e.update=function(r,i,c){var o=r.contacts,f=i.supports,n=r.activeContacts,t=i.parentA,a=i.parentB,s=t.vertices.length;r.isActive=!0,r.timeUpdated=c,r.collision=i,r.separation=i.depth,r.inverseMass=t.inverseMass+a.inverseMass,r.friction=t.friction<a.friction?t.friction:a.friction,r.frictionStatic=t.frictionStatic>a.frictionStatic?t.frictionStatic:a.frictionStatic,r.restitution=t.restitution>a.restitution?t.restitution:a.restitution,r.slop=t.slop>a.slop?t.slop:a.slop,i.pair=r,n.length=0;for(var v=0;v<f.length;v++){var p=f[v],C=p.body===t?p.index:s+p.index,w=o[C];w?n.push(w):n.push(o[C]=l.create(p))}},e.setActive=function(r,i,c){i?(r.isActive=!0,r.timeUpdated=c):(r.isActive=!1,r.activeContacts.length=0)},e.id=function(r,i){return r.id<i.id?"A"+r.id+"B"+i.id:"A"+i.id+"B"+r.id}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(2),i=x(7),c=x(1),o=x(11),f=x(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(n){var t=n;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var a=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,v=r.magnitude(r.sub(a,s));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var p={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(p.type="pin",p.anchors=!1):t.stiffness<.9&&(p.type="spring"),t.render=f.extend(p,t.render),t},e.preSolveAll=function(n){for(var t=0;t<n.length;t+=1){var a=n[t],s=a.constraintImpulse;a.isStatic||s.x===0&&s.y===0&&s.angle===0||(a.position.x+=s.x,a.position.y+=s.y,a.angle+=s.angle)}},e.solveAll=function(n,t){for(var a=0;a<n.length;a+=1){var s=n[a],v=!s.bodyA||s.bodyA&&s.bodyA.isStatic,p=!s.bodyB||s.bodyB&&s.bodyB.isStatic;(v||p)&&e.solve(n[a],t)}for(a=0;a<n.length;a+=1)s=n[a],v=!s.bodyA||s.bodyA&&s.bodyA.isStatic,p=!s.bodyB||s.bodyB&&s.bodyB.isStatic,!v&&!p&&e.solve(n[a],t)},e.solve=function(n,t){var a=n.bodyA,s=n.bodyB,v=n.pointA,p=n.pointB;if(!(!a&&!s)){a&&!a.isStatic&&(r.rotate(v,a.angle-n.angleA,v),n.angleA=a.angle),s&&!s.isStatic&&(r.rotate(p,s.angle-n.angleB,p),n.angleB=s.angle);var C=v,w=p;if(a&&(C=r.add(a.position,v)),s&&(w=r.add(s.position,p)),!(!C||!w)){var u=r.sub(C,w),g=r.magnitude(u);g<e._minLength&&(g=e._minLength);var m=(g-n.length)/g,h=n.stiffness<1?n.stiffness*t:n.stiffness,S=r.mult(u,m*h),y=(a?a.inverseMass:0)+(s?s.inverseMass:0),P=(a?a.inverseInertia:0)+(s?s.inverseInertia:0),d=y+P,M,I,T,B,E;if(n.damping){var L=r.create();T=r.div(u,g),E=r.sub(s&&r.sub(s.position,s.positionPrev)||L,a&&r.sub(a.position,a.positionPrev)||L),B=r.dot(T,E)}a&&!a.isStatic&&(I=a.inverseMass/y,a.constraintImpulse.x-=S.x*I,a.constraintImpulse.y-=S.y*I,a.position.x-=S.x*I,a.position.y-=S.y*I,n.damping&&(a.positionPrev.x-=n.damping*T.x*B*I,a.positionPrev.y-=n.damping*T.y*B*I),M=r.cross(v,S)/d*e._torqueDampen*a.inverseInertia*(1-n.angularStiffness),a.constraintImpulse.angle-=M,a.angle-=M),s&&!s.isStatic&&(I=s.inverseMass/y,s.constraintImpulse.x+=S.x*I,s.constraintImpulse.y+=S.y*I,s.position.x+=S.x*I,s.position.y+=S.y*I,n.damping&&(s.positionPrev.x+=n.damping*T.x*B*I,s.positionPrev.y+=n.damping*T.y*B*I),M=r.cross(p,S)/d*e._torqueDampen*s.inverseInertia*(1-n.angularStiffness),s.constraintImpulse.angle+=M,s.angle+=M)}}},e.postSolveAll=function(n){for(var t=0;t<n.length;t++){var a=n[t],s=a.constraintImpulse;if(!(a.isStatic||s.x===0&&s.y===0&&s.angle===0)){i.set(a,!1);for(var v=0;v<a.parts.length;v++){var p=a.parts[v];l.translate(p.vertices,s),v>0&&(p.position.x+=s.x,p.position.y+=s.y),s.angle!==0&&(l.rotate(p.vertices,s.angle,a.position),o.rotate(p.axes,s.angle),v>0&&r.rotateAbout(p.position,s.angle,a.position,p.position)),c.update(p.bounds,p.vertices,a.velocity)}s.angle*=e._warming,s.x*=e._warming,s.y*=e._warming}}},e.pointAWorld=function(n){return{x:(n.bodyA?n.bodyA.position.x:0)+n.pointA.x,y:(n.bodyA?n.bodyA.position.y:0)+n.pointA.y}},e.pointBWorld=function(n){return{x:(n.bodyB?n.bodyB.position.x:0)+n.pointB.x,y:(n.bodyB?n.bodyB.position.y:0)+n.pointB.y}}})()},function(A,R,x){var e={};A.exports=e;var l=x(2),r=x(0);(function(){e.fromVertices=function(i){for(var c={},o=0;o<i.length;o++){var f=(o+1)%i.length,n=l.normalise({x:i[f].y-i[o].y,y:i[o].x-i[f].x}),t=n.y===0?1/0:n.x/n.y;t=t.toFixed(3).toString(),c[t]=n}return r.values(c)},e.rotate=function(i,c){if(c!==0)for(var o=Math.cos(c),f=Math.sin(c),n=0;n<i.length;n++){var t=i[n],a;a=t.x*o-t.y*f,t.y=t.x*f+t.y*o,t.x=a}}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(0),i=x(6),c=x(1),o=x(2);(function(){e.rectangle=function(f,n,t,a,s){s=s||{};var v={label:"Rectangle Body",position:{x:f,y:n},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+a+" L 0 "+a)};if(s.chamfer){var p=s.chamfer;v.vertices=l.chamfer(v.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete s.chamfer}return i.create(r.extend({},v,s))},e.trapezoid=function(f,n,t,a,s,v){v=v||{},s*=.5;var p=(1-s*2)*t,C=t*s,w=C+p,u=w+C,g;s<.5?g="L 0 0 L "+C+" "+-a+" L "+w+" "+-a+" L "+u+" 0":g="L 0 0 L "+w+" "+-a+" L "+u+" 0";var m={label:"Trapezoid Body",position:{x:f,y:n},vertices:l.fromPath(g)};if(v.chamfer){var h=v.chamfer;m.vertices=l.chamfer(m.vertices,h.radius,h.quality,h.qualityMin,h.qualityMax),delete v.chamfer}return i.create(r.extend({},m,v))},e.circle=function(f,n,t,a,s){a=a||{};var v={label:"Circle Body",circleRadius:t};s=s||25;var p=Math.ceil(Math.max(10,Math.min(s,t)));return p%2===1&&(p+=1),e.polygon(f,n,p,t,r.extend({},v,a))},e.polygon=function(f,n,t,a,s){if(s=s||{},t<3)return e.circle(f,n,a,s);for(var v=2*Math.PI/t,p="",C=v*.5,w=0;w<t;w+=1){var u=C+w*v,g=Math.cos(u)*a,m=Math.sin(u)*a;p+="L "+g.toFixed(3)+" "+m.toFixed(3)+" "}var h={label:"Polygon Body",position:{x:f,y:n},vertices:l.fromPath(p)};if(s.chamfer){var S=s.chamfer;h.vertices=l.chamfer(h.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete s.chamfer}return i.create(r.extend({},h,s))},e.fromVertices=function(f,n,t,a,s,v,p,C){var w=r.getDecomp(),u,g,m,h,S,y,P,d,M,I,T;for(u=Boolean(w&&w.quickDecomp),a=a||{},m=[],s=typeof s!="undefined"?s:!1,v=typeof v!="undefined"?v:.01,p=typeof p!="undefined"?p:10,C=typeof C!="undefined"?C:.01,r.isArray(t[0])||(t=[t]),I=0;I<t.length;I+=1)if(y=t[I],h=l.isConvex(y),S=!h,S&&!u&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),h||!u)h?y=l.clockwiseSort(y):y=l.hull(y),m.push({position:{x:f,y:n},vertices:y});else{var B=y.map(function(G){return[G.x,G.y]});w.makeCCW(B),v!==!1&&w.removeCollinearPoints(B,v),C!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(B,C);var E=w.quickDecomp(B);for(P=0;P<E.length;P++){var L=E[P],D=L.map(function(G){return{x:G[0],y:G[1]}});p>0&&l.area(D)<p||m.push({position:l.centre(D),vertices:D})}}for(P=0;P<m.length;P++)m[P]=i.create(r.extend(m[P],a));if(s){var F=5;for(P=0;P<m.length;P++){var V=m[P];for(d=P+1;d<m.length;d++){var H=m[d];if(c.overlaps(V.bounds,H.bounds)){var W=V.vertices,k=H.vertices;for(M=0;M<V.vertices.length;M++)for(T=0;T<H.vertices.length;T++){var Q=o.magnitudeSquared(o.sub(W[(M+1)%W.length],k[T])),U=o.magnitudeSquared(o.sub(W[M],k[(T+1)%k.length]));Q<F&&U<F&&(W[M].isInternal=!0,k[T].isInternal=!0)}}}}}return m.length>1?(g=i.create(r.extend({parts:m.slice(0)},a)),i.setPosition(g,{x:f,y:n}),g):m[0]}})()},function(A,R,x){var e={};A.exports=e;var l=x(0);(function(){e.create=function(r){var i={};return r||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=r||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&(i.button=0,c.preventDefault()),i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=c},i.mousedown=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f?(i.button=0,c.preventDefault()):i.button=c.button,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=c},i.mouseup=function(c){var o=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),i.button=-1,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=c},i.mousewheel=function(c){i.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(r,i){r.element=i,i.addEventListener("mousemove",r.mousemove),i.addEventListener("mousedown",r.mousedown),i.addEventListener("mouseup",r.mouseup),i.addEventListener("mousewheel",r.mousewheel),i.addEventListener("DOMMouseScroll",r.mousewheel),i.addEventListener("touchmove",r.mousemove),i.addEventListener("touchstart",r.mousedown),i.addEventListener("touchend",r.mouseup)},e.clearSourceEvents=function(r){r.sourceEvents.mousemove=null,r.sourceEvents.mousedown=null,r.sourceEvents.mouseup=null,r.sourceEvents.mousewheel=null,r.wheelDelta=0},e.setOffset=function(r,i){r.offset.x=i.x,r.offset.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e.setScale=function(r,i){r.scale.x=i.x,r.scale.y=i.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y},e._getRelativeMousePosition=function(r,i,c){var o=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,n=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,a=r.changedTouches,s,v;return a?(s=a[0].pageX-o.left-n,v=a[0].pageY-o.top-t):(s=r.pageX-o.left-n,v=r.pageY-o.top-t),{x:s/(i.clientWidth/(i.width||i.clientWidth)*c),y:v/(i.clientHeight/(i.height||i.clientHeight)*c)}}})()},function(A,R,x){var e={};A.exports=e;var l=x(0),r=x(8);(function(){e.create=function(i){var c={bodies:[],pairs:null};return l.extend(c,i)},e.setBodies=function(i,c){i.bodies=c.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var c=[],o=i.pairs,f=i.bodies,n=f.length,t=e.canCollide,a=r.collides,s,v;for(f.sort(e._compareBoundsX),s=0;s<n;s++){var p=f[s],C=p.bounds,w=p.bounds.max.x,u=p.bounds.max.y,g=p.bounds.min.y,m=p.isStatic||p.isSleeping,h=p.parts.length,S=h===1;for(v=s+1;v<n;v++){var y=f[v],P=y.bounds;if(P.min.x>w)break;if(!(u<P.min.y||g>P.max.y)&&!(m&&(y.isStatic||y.isSleeping))&&!!t(p.collisionFilter,y.collisionFilter)){var d=y.parts.length;if(S&&d===1){var M=a(p,y,o);M&&c.push(M)}else for(var I=h>1?1:0,T=d>1?1:0,B=I;B<h;B++)for(var E=p.parts[B],C=E.bounds,L=T;L<d;L++){var D=y.parts[L],P=D.bounds;if(!(C.min.x>P.max.x||C.max.x<P.min.x||C.max.y<P.min.y||C.min.y>P.max.y)){var M=a(E,D,o);M&&c.push(M)}}}}}return c},e.canCollide=function(i,c){return i.group===c.group&&i.group!==0?i.group>0:(i.mask&c.category)!==0&&(c.mask&i.category)!==0},e._compareBoundsX=function(i,c){return i.bounds.min.x-c.bounds.min.x}})()},function(A,R,x){var e={};A.exports=e;var l=x(0);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||l.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var i=e._registry[r.name],c=e.versionParse(r.version).number,o=e.versionParse(i.version).number;c>o?(l.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(r)),e._registry[r.name]=r):c<o?l.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(r)):r!==i&&l.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,i){return r.used.indexOf(i)>-1},e.isFor=function(r,i){var c=r.for&&e.dependencyParse(r.for);return!r.for||i.name===c.name&&e.versionSatisfies(i.version,c.range)},e.use=function(r,i){if(r.uses=(r.uses||[]).concat(i||[]),r.uses.length===0){l.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var c=e.dependencies(r),o=l.topologicalSort(c),f=[],n=0;n<o.length;n+=1)if(o[n]!==r.name){var t=e.resolve(o[n]);if(!t){f.push("\u274C "+o[n]);continue}e.isUsed(r,t.name)||(e.isFor(t,r)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(r)+"."),t._warned=!0),t.install?t.install(r):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),r.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(r,i){var c=e.dependencyParse(r),o=c.name;if(i=i||{},!(o in i)){r=e.resolve(r)||r,i[o]=l.map(r.uses||[],function(n){e.isPlugin(n)&&e.register(n);var t=e.dependencyParse(n),a=e.resolve(n);return a&&!e.versionSatisfies(a.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(a),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),a._warned=!0,r._warned=!0):a||(l.warn("Plugin.dependencies:",e.toString(n),"used by",e.toString(c),"could not be resolved."),r._warned=!0),t.name});for(var f=0;f<i[o].length;f+=1)e.dependencies(i[o][f],i);return i}},e.dependencyParse=function(r){if(l.isString(r)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(r)||l.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(r)||l.warn("Plugin.versionParse:",r,"is not a valid version or range.");var c=i.exec(r),o=Number(c[4]),f=Number(c[5]),n=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:r,operator:c[1]||c[2]||"",major:o,minor:f,patch:n,parts:[o,f,n],prerelease:c[7],number:o*1e8+f*1e4+n}},e.versionSatisfies=function(r,i){i=i||"*";var c=e.versionParse(i),o=e.versionParse(r);if(c.isRange){if(c.operator==="*"||r==="*")return!0;if(c.operator===">")return o.number>c.number;if(c.operator===">=")return o.number>=c.number;if(c.operator==="~")return o.major===c.major&&o.minor===c.minor&&o.patch>=c.patch;if(c.operator==="^")return c.major>0?o.major===c.major&&o.number>=c.number:c.minor>0?o.minor===c.minor&&o.patch>=c.patch:o.patch===c.patch}return r===i||r==="*"}})()},function(A,R,x){var e={};A.exports=e;var l=x(0),r=x(5),i=x(1),c=x(4),o=x(2),f=x(13);(function(){var n,t;typeof window!="undefined"&&(n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(u){window.setTimeout(function(){u(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(u){var g={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!u.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=l.extend(g,u);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=u.mouse,m.engine=u.engine,m.canvas=m.canvas||v(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),l.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(u){(function g(m){u.frameRequestId=n(g),a(u,m),e.world(u,m),(u.options.showStats||u.options.showDebug)&&e.stats(u,u.context,m),(u.options.showPerformance||u.options.showDebug)&&e.performance(u,u.context,m)})()},e.stop=function(u){t(u.frameRequestId)},e.setPixelRatio=function(u,g){var m=u.options,h=u.canvas;g==="auto"&&(g=p(h)),m.pixelRatio=g,h.setAttribute("data-pixel-ratio",g),h.width=m.width*g,h.height=m.height*g,h.style.width=m.width+"px",h.style.height=m.height+"px"},e.lookAt=function(u,g,m,h){h=typeof h!="undefined"?h:!0,g=l.isArray(g)?g:[g],m=m||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},y=0;y<g.length;y+=1){var P=g[y],d=P.bounds?P.bounds.min:P.min||P.position||P,M=P.bounds?P.bounds.max:P.max||P.position||P;d&&M&&(d.x<S.min.x&&(S.min.x=d.x),M.x>S.max.x&&(S.max.x=M.x),d.y<S.min.y&&(S.min.y=d.y),M.y>S.max.y&&(S.max.y=M.y))}var I=S.max.x-S.min.x+2*m.x,T=S.max.y-S.min.y+2*m.y,B=u.canvas.height,E=u.canvas.width,L=E/B,D=I/T,F=1,V=1;D>L?V=D/L:F=L/D,u.options.hasBounds=!0,u.bounds.min.x=S.min.x,u.bounds.max.x=S.min.x+I*F,u.bounds.min.y=S.min.y,u.bounds.max.y=S.min.y+T*V,h&&(u.bounds.min.x+=I*.5-I*F*.5,u.bounds.max.x+=I*.5-I*F*.5,u.bounds.min.y+=T*.5-T*V*.5,u.bounds.max.y+=T*.5-T*V*.5),u.bounds.min.x-=m.x,u.bounds.max.x-=m.x,u.bounds.min.y-=m.y,u.bounds.max.y-=m.y,u.mouse&&(f.setScale(u.mouse,{x:(u.bounds.max.x-u.bounds.min.x)/u.canvas.width,y:(u.bounds.max.y-u.bounds.min.y)/u.canvas.height}),f.setOffset(u.mouse,u.bounds.min))},e.startViewTransform=function(u){var g=u.bounds.max.x-u.bounds.min.x,m=u.bounds.max.y-u.bounds.min.y,h=g/u.options.width,S=m/u.options.height;u.context.setTransform(u.options.pixelRatio/h,0,0,u.options.pixelRatio/S,0,0),u.context.translate(-u.bounds.min.x,-u.bounds.min.y)},e.endViewTransform=function(u){u.context.setTransform(u.options.pixelRatio,0,0,u.options.pixelRatio,0,0)},e.world=function(u,g){var m=l.now(),h=u.engine,S=h.world,y=u.canvas,P=u.context,d=u.options,M=u.timing,I=r.allBodies(S),T=r.allConstraints(S),B=d.wireframes?d.wireframeBackground:d.background,E=[],L=[],D,F={timestamp:h.timing.timestamp};if(c.trigger(u,"beforeRender",F),u.currentBackground!==B&&w(u,B),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,y.width,y.height),P.globalCompositeOperation="source-over",d.hasBounds){for(D=0;D<I.length;D++){var V=I[D];i.overlaps(V.bounds,u.bounds)&&E.push(V)}for(D=0;D<T.length;D++){var H=T[D],W=H.bodyA,k=H.bodyB,Q=H.pointA,U=H.pointB;W&&(Q=o.add(W.position,H.pointA)),k&&(U=o.add(k.position,H.pointB)),!(!Q||!U)&&(i.contains(u.bounds,Q)||i.contains(u.bounds,U))&&L.push(H)}e.startViewTransform(u),u.mouse&&(f.setScale(u.mouse,{x:(u.bounds.max.x-u.bounds.min.x)/u.options.width,y:(u.bounds.max.y-u.bounds.min.y)/u.options.height}),f.setOffset(u.mouse,u.bounds.min))}else L=T,E=I,u.options.pixelRatio!==1&&u.context.setTransform(u.options.pixelRatio,0,0,u.options.pixelRatio,0,0);!d.wireframes||h.enableSleeping&&d.showSleeping?e.bodies(u,E,P):(d.showConvexHulls&&e.bodyConvexHulls(u,E,P),e.bodyWireframes(u,E,P)),d.showBounds&&e.bodyBounds(u,E,P),(d.showAxes||d.showAngleIndicator)&&e.bodyAxes(u,E,P),d.showPositions&&e.bodyPositions(u,E,P),d.showVelocity&&e.bodyVelocity(u,E,P),d.showIds&&e.bodyIds(u,E,P),d.showSeparations&&e.separations(u,h.pairs.list,P),d.showCollisions&&e.collisions(u,h.pairs.list,P),d.showVertexNumbers&&e.vertexNumbers(u,E,P),d.showMousePosition&&e.mousePosition(u,u.mouse,P),e.constraints(L,P),d.hasBounds&&e.endViewTransform(u),c.trigger(u,"afterRender",F),M.lastElapsed=l.now()-m},e.stats=function(u,g,m){for(var h=u.engine,S=h.world,y=r.allBodies(S),P=0,d=55,M=44,I=0,T=0,B=0;B<y.length;B+=1)P+=y[B].parts.length;var E={Part:P,Body:y.length,Cons:r.allConstraints(S).length,Comp:r.allComposites(S).length,Pair:h.pairs.list.length};g.fillStyle="#0e0f19",g.fillRect(I,T,d*5.5,M),g.font="12px Arial",g.textBaseline="top",g.textAlign="right";for(var L in E){var D=E[L];g.fillStyle="#aaa",g.fillText(L,I+d,T+8),g.fillStyle="#eee",g.fillText(D,I+d,T+26),I+=d}},e.performance=function(u,g){var m=u.engine,h=u.timing,S=h.deltaHistory,y=h.elapsedHistory,P=h.timestampElapsedHistory,d=h.engineDeltaHistory,M=h.engineElapsedHistory,I=m.timing.lastDelta,T=s(S),B=s(y),E=s(d),L=s(M),D=s(P),F=D/T||0,V=1e3/T||0,H=4,W=12,k=60,Q=34,U=10,G=69;g.fillStyle="#0e0f19",g.fillRect(0,50,W*4+k*5+22,Q),e.status(g,U,G,k,H,S.length,Math.round(V)+" fps",V/e._goodFps,function(z){return S[z]/T-1}),e.status(g,U+W+k,G,k,H,d.length,I.toFixed(2)+" dt",e._goodDelta/I,function(z){return d[z]/E-1}),e.status(g,U+(W+k)*2,G,k,H,M.length,L.toFixed(2)+" ut",1-L/e._goodFps,function(z){return M[z]/L-1}),e.status(g,U+(W+k)*3,G,k,H,y.length,B.toFixed(2)+" rt",1-B/e._goodFps,function(z){return y[z]/B-1}),e.status(g,U+(W+k)*4,G,k,H,P.length,F.toFixed(2)+" x",F*F*F,function(z){return(P[z]/S[z]/F||0)-1})},e.status=function(u,g,m,h,S,y,P,d,M){u.strokeStyle="#888",u.fillStyle="#444",u.lineWidth=1,u.fillRect(g,m+7,h,1),u.beginPath(),u.moveTo(g,m+7-S*l.clamp(.4*M(0),-2,2));for(var I=0;I<h;I+=1)u.lineTo(g+I,m+7-(I<y?S*l.clamp(.4*M(I),-2,2):0));u.stroke(),u.fillStyle="hsl("+l.clamp(25+95*d,0,120)+",100%,60%)",u.fillRect(g,m-7,4,4),u.font="12px Arial",u.textBaseline="middle",u.textAlign="right",u.fillStyle="#eee",u.fillText(P,g+h,m-5)},e.constraints=function(u,g){for(var m=g,h=0;h<u.length;h++){var S=u[h];if(!(!S.render.visible||!S.pointA||!S.pointB)){var y=S.bodyA,P=S.bodyB,d,M;if(y?d=o.add(y.position,S.pointA):d=S.pointA,S.render.type==="pin")m.beginPath(),m.arc(d.x,d.y,3,0,2*Math.PI),m.closePath();else{if(P?M=o.add(P.position,S.pointB):M=S.pointB,m.beginPath(),m.moveTo(d.x,d.y),S.render.type==="spring")for(var I=o.sub(M,d),T=o.perp(o.normalise(I)),B=Math.ceil(l.clamp(S.length/5,12,20)),E,L=1;L<B;L+=1)E=L%2===0?1:-1,m.lineTo(d.x+I.x*(L/B)+T.x*E*4,d.y+I.y*(L/B)+T.y*E*4);m.lineTo(M.x,M.y)}S.render.lineWidth&&(m.lineWidth=S.render.lineWidth,m.strokeStyle=S.render.strokeStyle,m.stroke()),S.render.anchors&&(m.fillStyle=S.render.strokeStyle,m.beginPath(),m.arc(d.x,d.y,3,0,2*Math.PI),m.arc(M.x,M.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(u,g,m){var h=m;u.engine;var S=u.options,y=S.showInternalEdges||!S.wireframes,P,d,M,I;for(M=0;M<g.length;M++)if(P=g[M],!!P.render.visible){for(I=P.parts.length>1?1:0;I<P.parts.length;I++)if(d=P.parts[I],!!d.render.visible){if(S.showSleeping&&P.isSleeping?h.globalAlpha=.5*d.render.opacity:d.render.opacity!==1&&(h.globalAlpha=d.render.opacity),d.render.sprite&&d.render.sprite.texture&&!S.wireframes){var T=d.render.sprite,B=C(u,T.texture);h.translate(d.position.x,d.position.y),h.rotate(d.angle),h.drawImage(B,B.width*-T.xOffset*T.xScale,B.height*-T.yOffset*T.yScale,B.width*T.xScale,B.height*T.yScale),h.rotate(-d.angle),h.translate(-d.position.x,-d.position.y)}else{if(d.circleRadius)h.beginPath(),h.arc(d.position.x,d.position.y,d.circleRadius,0,2*Math.PI);else{h.beginPath(),h.moveTo(d.vertices[0].x,d.vertices[0].y);for(var E=1;E<d.vertices.length;E++)!d.vertices[E-1].isInternal||y?h.lineTo(d.vertices[E].x,d.vertices[E].y):h.moveTo(d.vertices[E].x,d.vertices[E].y),d.vertices[E].isInternal&&!y&&h.moveTo(d.vertices[(E+1)%d.vertices.length].x,d.vertices[(E+1)%d.vertices.length].y);h.lineTo(d.vertices[0].x,d.vertices[0].y),h.closePath()}S.wireframes?(h.lineWidth=1,h.strokeStyle="#bbb",h.stroke()):(h.fillStyle=d.render.fillStyle,d.render.lineWidth&&(h.lineWidth=d.render.lineWidth,h.strokeStyle=d.render.strokeStyle,h.stroke()),h.fill())}h.globalAlpha=1}}},e.bodyWireframes=function(u,g,m){var h=m,S=u.options.showInternalEdges,y,P,d,M,I;for(h.beginPath(),d=0;d<g.length;d++)if(y=g[d],!!y.render.visible)for(I=y.parts.length>1?1:0;I<y.parts.length;I++){for(P=y.parts[I],h.moveTo(P.vertices[0].x,P.vertices[0].y),M=1;M<P.vertices.length;M++)!P.vertices[M-1].isInternal||S?h.lineTo(P.vertices[M].x,P.vertices[M].y):h.moveTo(P.vertices[M].x,P.vertices[M].y),P.vertices[M].isInternal&&!S&&h.moveTo(P.vertices[(M+1)%P.vertices.length].x,P.vertices[(M+1)%P.vertices.length].y);h.lineTo(P.vertices[0].x,P.vertices[0].y)}h.lineWidth=1,h.strokeStyle="#bbb",h.stroke()},e.bodyConvexHulls=function(u,g,m){var h=m,S,y,P;for(h.beginPath(),y=0;y<g.length;y++)if(S=g[y],!(!S.render.visible||S.parts.length===1)){for(h.moveTo(S.vertices[0].x,S.vertices[0].y),P=1;P<S.vertices.length;P++)h.lineTo(S.vertices[P].x,S.vertices[P].y);h.lineTo(S.vertices[0].x,S.vertices[0].y)}h.lineWidth=1,h.strokeStyle="rgba(255,255,255,0.2)",h.stroke()},e.vertexNumbers=function(u,g,m){var h=m,S,y,P;for(S=0;S<g.length;S++){var d=g[S].parts;for(P=d.length>1?1:0;P<d.length;P++){var M=d[P];for(y=0;y<M.vertices.length;y++)h.fillStyle="rgba(255,255,255,0.2)",h.fillText(S+"_"+y,M.position.x+(M.vertices[y].x-M.position.x)*.8,M.position.y+(M.vertices[y].y-M.position.y)*.8)}}},e.mousePosition=function(u,g,m){var h=m;h.fillStyle="rgba(255,255,255,0.8)",h.fillText(g.position.x+"  "+g.position.y,g.position.x+5,g.position.y-5)},e.bodyBounds=function(u,g,m){var h=m;u.engine;var S=u.options;h.beginPath();for(var y=0;y<g.length;y++){var P=g[y];if(P.render.visible)for(var d=g[y].parts,M=d.length>1?1:0;M<d.length;M++){var I=d[M];h.rect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}S.wireframes?h.strokeStyle="rgba(255,255,255,0.08)":h.strokeStyle="rgba(0,0,0,0.1)",h.lineWidth=1,h.stroke()},e.bodyAxes=function(u,g,m){var h=m;u.engine;var S=u.options,y,P,d,M;for(h.beginPath(),P=0;P<g.length;P++){var I=g[P],T=I.parts;if(!!I.render.visible)if(S.showAxes)for(d=T.length>1?1:0;d<T.length;d++)for(y=T[d],M=0;M<y.axes.length;M++){var B=y.axes[M];h.moveTo(y.position.x,y.position.y),h.lineTo(y.position.x+B.x*20,y.position.y+B.y*20)}else for(d=T.length>1?1:0;d<T.length;d++)for(y=T[d],M=0;M<y.axes.length;M++)h.moveTo(y.position.x,y.position.y),h.lineTo((y.vertices[0].x+y.vertices[y.vertices.length-1].x)/2,(y.vertices[0].y+y.vertices[y.vertices.length-1].y)/2)}S.wireframes?(h.strokeStyle="indianred",h.lineWidth=1):(h.strokeStyle="rgba(255, 255, 255, 0.4)",h.globalCompositeOperation="overlay",h.lineWidth=2),h.stroke(),h.globalCompositeOperation="source-over"},e.bodyPositions=function(u,g,m){var h=m;u.engine;var S=u.options,y,P,d,M;for(h.beginPath(),d=0;d<g.length;d++)if(y=g[d],!!y.render.visible)for(M=0;M<y.parts.length;M++)P=y.parts[M],h.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),h.closePath();for(S.wireframes?h.fillStyle="indianred":h.fillStyle="rgba(0,0,0,0.5)",h.fill(),h.beginPath(),d=0;d<g.length;d++)y=g[d],y.render.visible&&(h.arc(y.positionPrev.x,y.positionPrev.y,2,0,2*Math.PI,!1),h.closePath());h.fillStyle="rgba(255,165,0,0.8)",h.fill()},e.bodyVelocity=function(u,g,m){var h=m;h.beginPath();for(var S=0;S<g.length;S++){var y=g[S];!y.render.visible||(h.moveTo(y.position.x,y.position.y),h.lineTo(y.position.x+(y.position.x-y.positionPrev.x)*2,y.position.y+(y.position.y-y.positionPrev.y)*2))}h.lineWidth=3,h.strokeStyle="cornflowerblue",h.stroke()},e.bodyIds=function(u,g,m){var h=m,S,y;for(S=0;S<g.length;S++)if(!!g[S].render.visible){var P=g[S].parts;for(y=P.length>1?1:0;y<P.length;y++){var d=P[y];h.font="12px Arial",h.fillStyle="rgba(255,255,255,0.5)",h.fillText(d.id,d.position.x+10,d.position.y-10)}}},e.collisions=function(u,g,m){var h=m,S=u.options,y,P,d,M;for(h.beginPath(),d=0;d<g.length;d++)if(y=g[d],!!y.isActive)for(P=y.collision,M=0;M<y.activeContacts.length;M++){var I=y.activeContacts[M],T=I.vertex;h.rect(T.x-1.5,T.y-1.5,3.5,3.5)}for(S.wireframes?h.fillStyle="rgba(255,255,255,0.7)":h.fillStyle="orange",h.fill(),h.beginPath(),d=0;d<g.length;d++)if(y=g[d],!!y.isActive&&(P=y.collision,y.activeContacts.length>0)){var B=y.activeContacts[0].vertex.x,E=y.activeContacts[0].vertex.y;y.activeContacts.length===2&&(B=(y.activeContacts[0].vertex.x+y.activeContacts[1].vertex.x)/2,E=(y.activeContacts[0].vertex.y+y.activeContacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?h.moveTo(B-P.normal.x*8,E-P.normal.y*8):h.moveTo(B+P.normal.x*8,E+P.normal.y*8),h.lineTo(B,E)}S.wireframes?h.strokeStyle="rgba(255,165,0,0.7)":h.strokeStyle="orange",h.lineWidth=1,h.stroke()},e.separations=function(u,g,m){var h=m,S=u.options,y,P,d,M,I;for(h.beginPath(),I=0;I<g.length;I++)if(y=g[I],!!y.isActive){P=y.collision,d=P.bodyA,M=P.bodyB;var T=1;!M.isStatic&&!d.isStatic&&(T=.5),M.isStatic&&(T=0),h.moveTo(M.position.x,M.position.y),h.lineTo(M.position.x-P.penetration.x*T,M.position.y-P.penetration.y*T),T=1,!M.isStatic&&!d.isStatic&&(T=.5),d.isStatic&&(T=0),h.moveTo(d.position.x,d.position.y),h.lineTo(d.position.x+P.penetration.x*T,d.position.y+P.penetration.y*T)}S.wireframes?h.strokeStyle="rgba(255,165,0,0.5)":h.strokeStyle="orange",h.stroke()},e.inspector=function(u,g){u.engine;var m=u.selected,h=u.render,S=h.options,y;if(S.hasBounds){var P=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,M=P/h.options.width,I=d/h.options.height;g.scale(1/M,1/I),g.translate(-h.bounds.min.x,-h.bounds.min.y)}for(var T=0;T<m.length;T++){var B=m[T].data;switch(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.9)",g.setLineDash([1,2]),B.type){case"body":y=B.bounds,g.beginPath(),g.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),g.closePath(),g.stroke();break;case"constraint":var E=B.pointA;B.bodyA&&(E=B.pointB),g.beginPath(),g.arc(E.x,E.y,10,0,2*Math.PI),g.closePath(),g.stroke();break}g.setLineDash([]),g.translate(-.5,-.5)}u.selectStart!==null&&(g.translate(.5,.5),g.lineWidth=1,g.strokeStyle="rgba(255,165,0,0.6)",g.fillStyle="rgba(255,165,0,0.1)",y=u.selectBounds,g.beginPath(),g.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),g.closePath(),g.stroke(),g.fill(),g.translate(-.5,-.5)),S.hasBounds&&g.setTransform(1,0,0,1,0,0)};var a=function(u,g){var m=u.engine,h=u.timing,S=h.historySize,y=m.timing.timestamp;h.delta=g-h.lastTime||e._goodDelta,h.lastTime=g,h.timestampElapsed=y-h.lastTimestamp||0,h.lastTimestamp=y,h.deltaHistory.unshift(h.delta),h.deltaHistory.length=Math.min(h.deltaHistory.length,S),h.engineDeltaHistory.unshift(m.timing.lastDelta),h.engineDeltaHistory.length=Math.min(h.engineDeltaHistory.length,S),h.timestampElapsedHistory.unshift(h.timestampElapsed),h.timestampElapsedHistory.length=Math.min(h.timestampElapsedHistory.length,S),h.engineElapsedHistory.unshift(m.timing.lastElapsed),h.engineElapsedHistory.length=Math.min(h.engineElapsedHistory.length,S),h.elapsedHistory.unshift(h.lastElapsed),h.elapsedHistory.length=Math.min(h.elapsedHistory.length,S)},s=function(u){for(var g=0,m=0;m<u.length;m+=1)g+=u[m];return g/u.length||0},v=function(u,g){var m=document.createElement("canvas");return m.width=u,m.height=g,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},p=function(u){var g=u.getContext("2d"),m=window.devicePixelRatio||1,h=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return m/h},C=function(u,g){var m=u.textures[g];return m||(m=u.textures[g]=new Image,m.src=g,m)},w=function(u,g){var m=g;/(jpg|gif|png)$/.test(g)&&(m="url("+g+")"),u.canvas.style.background=m,u.canvas.style.backgroundSize="contain",u.currentBackground=g}})()},function(A,R){var x={};A.exports=x,function(){x.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(A,R,x){var e={};A.exports=e;var l=x(7),r=x(19),i=x(14),c=x(20),o=x(4),f=x(5),n=x(10),t=x(0),a=x(6);(function(){e.create=function(s){s=s||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},p=t.extend(v,s);return p.world=s.world||f.create({label:"World"}),p.pairs=s.pairs||c.create(),p.detector=s.detector||i.create(),p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},e.update=function(s,v,p){var C=t.now();v=v||1e3/60,p=p||1;var w=s.world,u=s.detector,g=s.pairs,m=s.timing,h=m.timestamp,S;m.timestamp+=v*m.timeScale,m.lastDelta=v*m.timeScale;var y={timestamp:m.timestamp};o.trigger(s,"beforeUpdate",y);var P=f.allBodies(w),d=f.allConstraints(w);for(w.isModified&&i.setBodies(u,P),w.isModified&&f.setModified(w,!1,!1,!0),s.enableSleeping&&l.update(P,m.timeScale),e._bodiesApplyGravity(P,s.gravity),e._bodiesUpdate(P,v,m.timeScale,p,w.bounds),n.preSolveAll(P),S=0;S<s.constraintIterations;S++)n.solveAll(d,m.timeScale);n.postSolveAll(P),u.pairs=s.pairs;var M=i.collisions(u);for(c.update(g,M,h),s.enableSleeping&&l.afterCollisions(g.list,m.timeScale),g.collisionStart.length>0&&o.trigger(s,"collisionStart",{pairs:g.collisionStart}),r.preSolvePosition(g.list),S=0;S<s.positionIterations;S++)r.solvePosition(g.list,m.timeScale);for(r.postSolvePosition(P),n.preSolveAll(P),S=0;S<s.constraintIterations;S++)n.solveAll(d,m.timeScale);for(n.postSolveAll(P),r.preSolveVelocity(g.list),S=0;S<s.velocityIterations;S++)r.solveVelocity(g.list,m.timeScale);return g.collisionActive.length>0&&o.trigger(s,"collisionActive",{pairs:g.collisionActive}),g.collisionEnd.length>0&&o.trigger(s,"collisionEnd",{pairs:g.collisionEnd}),e._bodiesClearForces(P),o.trigger(s,"afterUpdate",y),s.timing.lastElapsed=t.now()-C,s},e.merge=function(s,v){if(t.extend(s,v),v.world){s.world=v.world,e.clear(s);for(var p=f.allBodies(s.world),C=0;C<p.length;C++){var w=p[C];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(s){c.clear(s.pairs),i.clear(s.detector)},e._bodiesClearForces=function(s){for(var v=0;v<s.length;v++){var p=s[v];p.force.x=0,p.force.y=0,p.torque=0}},e._bodiesApplyGravity=function(s,v){var p=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||p===0))for(var C=0;C<s.length;C++){var w=s[C];w.isStatic||w.isSleeping||(w.force.y+=w.mass*v.y*p,w.force.x+=w.mass*v.x*p)}},e._bodiesUpdate=function(s,v,p,C,w){for(var u=0;u<s.length;u++){var g=s[u];g.isStatic||g.isSleeping||a.update(g,v,p,C)}}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var c,o,f,n=i.length;for(c=0;c<n;c++)o=i[c],o.isActive&&(f=o.activeContacts.length,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,c){var o,f,n,t,a,s,v,p,C=e._positionDampen,w=i.length;for(o=0;o<w;o++)f=i[o],!(!f.isActive||f.isSensor)&&(n=f.collision,t=n.parentA,a=n.parentB,s=n.normal,f.separation=s.x*(a.positionImpulse.x+n.penetration.x-t.positionImpulse.x)+s.y*(a.positionImpulse.y+n.penetration.y-t.positionImpulse.y));for(o=0;o<w;o++)f=i[o],!(!f.isActive||f.isSensor)&&(n=f.collision,t=n.parentA,a=n.parentB,s=n.normal,p=(f.separation-f.slop)*c,(t.isStatic||a.isStatic)&&(p*=2),t.isStatic||t.isSleeping||(v=C/t.totalContacts,t.positionImpulse.x+=s.x*p*v,t.positionImpulse.y+=s.y*p*v),a.isStatic||a.isSleeping||(v=C/a.totalContacts,a.positionImpulse.x-=s.x*p*v,a.positionImpulse.y-=s.y*p*v))},e.postSolvePosition=function(i){for(var c=e._positionWarming,o=i.length,f=l.translate,n=r.update,t=0;t<o;t++){var a=i[t],s=a.positionImpulse,v=s.x,p=s.y,C=a.velocity;if(a.totalContacts=0,v!==0||p!==0){for(var w=0;w<a.parts.length;w++){var u=a.parts[w];f(u.vertices,s),n(u.bounds,u.vertices,C),u.position.x+=v,u.position.y+=p}a.positionPrev.x+=v,a.positionPrev.y+=p,v*C.x+p*C.y<0?(s.x=0,s.y=0):(s.x*=c,s.y*=c)}}},e.preSolveVelocity=function(i){var c=i.length,o,f;for(o=0;o<c;o++){var n=i[o];if(!(!n.isActive||n.isSensor)){var t=n.activeContacts,a=t.length,s=n.collision,v=s.parentA,p=s.parentB,C=s.normal,w=s.tangent;for(f=0;f<a;f++){var u=t[f],g=u.vertex,m=u.normalImpulse,h=u.tangentImpulse;if(m!==0||h!==0){var S=C.x*m+w.x*h,y=C.y*m+w.y*h;v.isStatic||v.isSleeping||(v.positionPrev.x+=S*v.inverseMass,v.positionPrev.y+=y*v.inverseMass,v.anglePrev+=v.inverseInertia*((g.x-v.position.x)*y-(g.y-v.position.y)*S)),p.isStatic||p.isSleeping||(p.positionPrev.x-=S*p.inverseMass,p.positionPrev.y-=y*p.inverseMass,p.anglePrev-=p.inverseInertia*((g.x-p.position.x)*y-(g.y-p.position.y)*S))}}}}},e.solveVelocity=function(i,c){var o=c*c,f=e._restingThresh*o,n=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,a=Number.MAX_VALUE,s=i.length,v,p,C,w;for(C=0;C<s;C++){var u=i[C];if(!(!u.isActive||u.isSensor)){var g=u.collision,m=g.parentA,h=g.parentB,S=m.velocity,y=h.velocity,P=g.normal.x,d=g.normal.y,M=g.tangent.x,I=g.tangent.y,T=u.activeContacts,B=T.length,E=1/B,L=m.inverseMass+h.inverseMass,D=u.friction*u.frictionStatic*n*o;for(S.x=m.position.x-m.positionPrev.x,S.y=m.position.y-m.positionPrev.y,y.x=h.position.x-h.positionPrev.x,y.y=h.position.y-h.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,h.angularVelocity=h.angle-h.anglePrev,w=0;w<B;w++){var F=T[w],V=F.vertex,H=V.x-m.position.x,W=V.y-m.position.y,k=V.x-h.position.x,Q=V.y-h.position.y,U=S.x-W*m.angularVelocity,G=S.y+H*m.angularVelocity,z=y.x-Q*h.angularVelocity,pe=y.y+k*h.angularVelocity,ie=U-z,re=G-pe,J=P*ie+d*re,Z=M*ie+I*re,ae=u.separation+J,b=Math.min(ae,1);b=ae<0?0:b;var se=b*D;Z>se||-Z>se?(p=Z>0?Z:-Z,v=u.friction*(Z>0?1:-1)*o,v<-p?v=-p:v>p&&(v=p)):(v=Z,p=a);var oe=H*d-W*P,le=k*d-Q*P,fe=E/(L+m.inverseInertia*oe*oe+h.inverseInertia*le*le),Y=(1+u.restitution)*J*fe;if(v*=fe,J*J>f&&J<0)F.normalImpulse=0;else{var me=F.normalImpulse;F.normalImpulse+=Y,F.normalImpulse=Math.min(F.normalImpulse,0),Y=F.normalImpulse-me}if(Z*Z>t)F.tangentImpulse=0;else{var de=F.tangentImpulse;F.tangentImpulse+=v,F.tangentImpulse<-p&&(F.tangentImpulse=-p),F.tangentImpulse>p&&(F.tangentImpulse=p),v=F.tangentImpulse-de}var $=P*Y+M*v,j=d*Y+I*v;m.isStatic||m.isSleeping||(m.positionPrev.x+=$*m.inverseMass,m.positionPrev.y+=j*m.inverseMass,m.anglePrev+=(H*j-W*$)*m.inverseInertia),h.isStatic||h.isSleeping||(h.positionPrev.x-=$*h.inverseMass,h.positionPrev.y-=j*h.inverseMass,h.anglePrev-=(k*j-Q*$)*h.inverseInertia)}}}}})()},function(A,R,x){var e={};A.exports=e;var l=x(9),r=x(0);(function(){e.create=function(i){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,c,o){var f=i.list,n=f.length,t=i.table,a=c.length,s=i.collisionStart,v=i.collisionEnd,p=i.collisionActive,C,w,u,g;for(s.length=0,v.length=0,p.length=0,g=0;g<n;g++)f[g].confirmedActive=!1;for(g=0;g<a;g++)C=c[g],u=C.pair,u?(u.isActive?p.push(u):s.push(u),l.update(u,C,o),u.confirmedActive=!0):(u=l.create(C,o),t[u.id]=u,s.push(u),f.push(u));var m=[];for(n=f.length,g=0;g<n;g++)u=f[g],u.confirmedActive||(l.setActive(u,!1,o),v.push(u),!u.collision.bodyA.isSleeping&&!u.collision.bodyB.isSleeping&&m.push(g));for(g=0;g<m.length;g++)w=m[g]-g,u=f[w],f.splice(w,1),delete t[u.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(A,R,x){var e=A.exports=x(22);e.Axes=x(11),e.Bodies=x(12),e.Body=x(6),e.Bounds=x(1),e.Collision=x(8),e.Common=x(0),e.Composite=x(5),e.Composites=x(23),e.Constraint=x(10),e.Contact=x(17),e.Detector=x(14),e.Engine=x(18),e.Events=x(4),e.Grid=x(24),e.Mouse=x(13),e.MouseConstraint=x(25),e.Pair=x(9),e.Pairs=x(20),e.Plugin=x(15),e.Query=x(26),e.Render=x(16),e.Resolver=x(19),e.Runner=x(27),e.SAT=x(28),e.Sleeping=x(7),e.Svg=x(29),e.Vector=x(2),e.Vertices=x(3),e.World=x(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(A,R,x){var e={};A.exports=e;var l=x(15),r=x(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,c){return i=i.replace(/^Matter./,""),r.chainPathBefore(e,i,c)},e.after=function(i,c){return i=i.replace(/^Matter./,""),r.chainPathAfter(e,i,c)}})()},function(A,R,x){var e={};A.exports=e;var l=x(5),r=x(10),i=x(0),c=x(6),o=x(12),f=i.deprecated;(function(){e.stack=function(n,t,a,s,v,p,C){for(var w=l.create({label:"Stack"}),u=n,g=t,m,h=0,S=0;S<s;S++){for(var y=0,P=0;P<a;P++){var d=C(u,g,P,S,m,h);if(d){var M=d.bounds.max.y-d.bounds.min.y,I=d.bounds.max.x-d.bounds.min.x;M>y&&(y=M),c.translate(d,{x:I*.5,y:M*.5}),u=d.bounds.max.x+v,l.addBody(w,d),m=d,h+=1}else u+=v}g+=y+p,u=n}return w},e.chain=function(n,t,a,s,v,p){for(var C=n.bodies,w=1;w<C.length;w++){var u=C[w-1],g=C[w],m=u.bounds.max.y-u.bounds.min.y,h=u.bounds.max.x-u.bounds.min.x,S=g.bounds.max.y-g.bounds.min.y,y=g.bounds.max.x-g.bounds.min.x,P={bodyA:u,pointA:{x:h*t,y:m*a},bodyB:g,pointB:{x:y*s,y:S*v}},d=i.extend(P,p);l.addConstraint(n,r.create(d))}return n.label+=" Chain",n},e.mesh=function(n,t,a,s,v){var p=n.bodies,C,w,u,g,m;for(C=0;C<a;C++){for(w=1;w<t;w++)u=p[w-1+C*t],g=p[w+C*t],l.addConstraint(n,r.create(i.extend({bodyA:u,bodyB:g},v)));if(C>0)for(w=0;w<t;w++)u=p[w+(C-1)*t],g=p[w+C*t],l.addConstraint(n,r.create(i.extend({bodyA:u,bodyB:g},v))),s&&w>0&&(m=p[w-1+(C-1)*t],l.addConstraint(n,r.create(i.extend({bodyA:m,bodyB:g},v)))),s&&w<t-1&&(m=p[w+1+(C-1)*t],l.addConstraint(n,r.create(i.extend({bodyA:m,bodyB:g},v))))}return n.label+=" Mesh",n},e.pyramid=function(n,t,a,s,v,p,C){return e.stack(n,t,a,s,v,p,function(w,u,g,m,h,S){var y=Math.min(s,Math.ceil(a/2)),P=h?h.bounds.max.x-h.bounds.min.x:0;if(!(m>y)){m=y-m;var d=m,M=a-1-m;if(!(g<d||g>M)){S===1&&c.translate(h,{x:(g+(a%2===1?1:-1))*P,y:0});var I=h?g*P:0;return C(n+I+g*v,u,g,m,h,S)}}})},e.newtonsCradle=function(n,t,a,s,v){for(var p=l.create({label:"Newtons Cradle"}),C=0;C<a;C++){var w=1.9,u=o.circle(n+C*(s*w),t+v,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=r.create({pointA:{x:n+C*(s*w),y:t},bodyB:u});l.addBody(p,u),l.addConstraint(p,g)}return p},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(n,t,a,s,v){var p=c.nextGroup(!0),C=20,w=-a*.5+C,u=a*.5-C,g=0,m=l.create({label:"Car"}),h=o.rectangle(n,t,a,s,{collisionFilter:{group:p},chamfer:{radius:s*.5},density:2e-4}),S=o.circle(n+w,t+g,v,{collisionFilter:{group:p},friction:.8}),y=o.circle(n+u,t+g,v,{collisionFilter:{group:p},friction:.8}),P=r.create({bodyB:h,pointB:{x:w,y:g},bodyA:S,stiffness:1,length:0}),d=r.create({bodyB:h,pointB:{x:u,y:g},bodyA:y,stiffness:1,length:0});return l.addBody(m,h),l.addBody(m,S),l.addBody(m,y),l.addConstraint(m,P),l.addConstraint(m,d),m},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(n,t,a,s,v,p,C,w,u,g){u=i.extend({inertia:1/0},u),g=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},g);var m=e.stack(n,t,a,s,v,p,function(h,S){return o.circle(h,S,w,u)});return e.mesh(m,a,s,C,g),m.label="Soft Body",m},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(A,R,x){var e={};A.exports=e;var l=x(9),r=x(0),i=r.deprecated;(function(){e.create=function(c){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return r.extend(o,c)},e.update=function(c,o,f,n){var t,a,s,v=f.world,p=c.buckets,C,w,u=!1;for(t=0;t<o.length;t++){var g=o[t];if(!(g.isSleeping&&!n)&&!(v.bounds&&(g.bounds.max.x<v.bounds.min.x||g.bounds.min.x>v.bounds.max.x||g.bounds.max.y<v.bounds.min.y||g.bounds.min.y>v.bounds.max.y))){var m=e._getRegion(c,g);if(!g.region||m.id!==g.region.id||n){(!g.region||n)&&(g.region=m);var h=e._regionUnion(m,g.region);for(a=h.startCol;a<=h.endCol;a++)for(s=h.startRow;s<=h.endRow;s++){w=e._getBucketId(a,s),C=p[w];var S=a>=m.startCol&&a<=m.endCol&&s>=m.startRow&&s<=m.endRow,y=a>=g.region.startCol&&a<=g.region.endCol&&s>=g.region.startRow&&s<=g.region.endRow;!S&&y&&y&&C&&e._bucketRemoveBody(c,C,g),(g.region===m||S&&!y||n)&&(C||(C=e._createBucket(p,w)),e._bucketAddBody(c,C,g))}g.region=m,u=!0}}}u&&(c.pairsList=e._createActivePairsList(c))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,o){var f=Math.min(c.startCol,o.startCol),n=Math.max(c.endCol,o.endCol),t=Math.min(c.startRow,o.startRow),a=Math.max(c.endRow,o.endRow);return e._createRegion(f,n,t,a)},e._getRegion=function(c,o){var f=o.bounds,n=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),a=Math.floor(f.min.y/c.bucketHeight),s=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(n,t,a,s)},e._createRegion=function(c,o,f,n){return{id:c+","+o+","+f+","+n,startCol:c,endCol:o,startRow:f,endRow:n}},e._getBucketId=function(c,o){return"C"+c+"R"+o},e._createBucket=function(c,o){var f=c[o]=[];return f},e._bucketAddBody=function(c,o,f){var n=c.pairs,t=l.id,a=o.length,s;for(s=0;s<a;s++){var v=o[s];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var p=t(f,v),C=n[p];C?C[2]+=1:n[p]=[f,v,1]}}o.push(f)},e._bucketRemoveBody=function(c,o,f){var n=c.pairs,t=l.id,a;o.splice(r.indexOf(o,f),1);var s=o.length;for(a=0;a<s;a++){var v=n[t(f,o[a])];v&&(v[2]-=1)}},e._createActivePairsList=function(c){var o,f=c.pairs,n=r.keys(f),t=n.length,a=[],s;for(s=0;s<t;s++)o=f[n[s]],o[2]>0?a.push(o):delete f[n[s]];return a}})()},function(A,R,x){var e={};A.exports=e;var l=x(3),r=x(7),i=x(13),c=x(4),o=x(14),f=x(10),n=x(5),t=x(0),a=x(1);(function(){e.create=function(s,v){var p=(s?s.mouse:null)||(v?v.mouse:null);p||(s&&s.render&&s.render.canvas?p=i.create(s.render.canvas):v&&v.element?p=i.create(v.element):(p=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:p.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:p,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},u=t.extend(w,v);return c.on(s,"beforeUpdate",function(){var g=n.allBodies(s.world);e.update(u,g),e._triggerEvents(u)}),u},e.update=function(s,v){var p=s.mouse,C=s.constraint,w=s.body;if(p.button===0){if(C.bodyB)r.set(C.bodyB,!1),C.pointA=p.position;else for(var u=0;u<v.length;u++)if(w=v[u],a.contains(w.bounds,p.position)&&o.canCollide(w.collisionFilter,s.collisionFilter))for(var g=w.parts.length>1?1:0;g<w.parts.length;g++){var m=w.parts[g];if(l.contains(m.vertices,p.position)){C.pointA=p.position,C.bodyB=s.body=w,C.pointB={x:p.position.x-w.position.x,y:p.position.y-w.position.y},C.angleB=w.angle,r.set(w,!1),c.trigger(s,"startdrag",{mouse:p,body:w});break}}}else C.bodyB=s.body=null,C.pointB=null,w&&c.trigger(s,"enddrag",{mouse:p,body:w})},e._triggerEvents=function(s){var v=s.mouse,p=v.sourceEvents;p.mousemove&&c.trigger(s,"mousemove",{mouse:v}),p.mousedown&&c.trigger(s,"mousedown",{mouse:v}),p.mouseup&&c.trigger(s,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(A,R,x){var e={};A.exports=e;var l=x(2),r=x(8),i=x(1),c=x(12),o=x(3);(function(){e.collides=function(f,n){for(var t=[],a=n.length,s=f.bounds,v=r.collides,p=i.overlaps,C=0;C<a;C++){var w=n[C],u=w.parts.length,g=u===1?0:1;if(p(w.bounds,s))for(var m=g;m<u;m++){var h=w.parts[m];if(p(h.bounds,s)){var S=v(h,f);if(S){t.push(S);break}}}}return t},e.ray=function(f,n,t,a){a=a||1e-100;for(var s=l.angle(n,t),v=l.magnitude(l.sub(n,t)),p=(t.x+n.x)*.5,C=(t.y+n.y)*.5,w=c.rectangle(p,C,v,a,{angle:s}),u=e.collides(w,f),g=0;g<u.length;g+=1){var m=u[g];m.body=m.bodyB=m.bodyA}return u},e.region=function(f,n,t){for(var a=[],s=0;s<f.length;s++){var v=f[s],p=i.overlaps(v.bounds,n);(p&&!t||!p&&t)&&a.push(v)}return a},e.point=function(f,n){for(var t=[],a=0;a<f.length;a++){var s=f[a];if(i.contains(s.bounds,n))for(var v=s.parts.length===1?0:1;v<s.parts.length;v++){var p=s.parts[v];if(i.contains(p.bounds,n)&&o.contains(p.vertices,n)){t.push(s);break}}}return t}})()},function(A,R,x){var e={};A.exports=e;var l=x(4),r=x(18),i=x(0);(function(){var c,o;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(n){f=setTimeout(function(){n(i.now())},1e3/60)},o=function(){clearTimeout(f)}}e.create=function(n){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},a=i.extend(t,n);return a.delta=a.delta||1e3/a.fps,a.deltaMin=a.deltaMin||1e3/a.fps,a.deltaMax=a.deltaMax||1e3/(a.fps*.5),a.fps=1e3/a.delta,a},e.run=function(n,t){return typeof n.positionIterations!="undefined"&&(t=n,n=e.create()),function a(s){n.frameRequestId=c(a),s&&n.enabled&&e.tick(n,t,s)}(),n},e.tick=function(n,t,a){var s=t.timing,v=1,p,C={timestamp:s.timestamp};l.trigger(n,"beforeTick",C),n.isFixed?p=n.delta:(p=a-n.timePrev||n.delta,n.timePrev=a,n.deltaHistory.push(p),n.deltaHistory=n.deltaHistory.slice(-n.deltaSampleSize),p=Math.min.apply(null,n.deltaHistory),p=p<n.deltaMin?n.deltaMin:p,p=p>n.deltaMax?n.deltaMax:p,v=p/n.delta,n.delta=p),n.timeScalePrev!==0&&(v*=s.timeScale/n.timeScalePrev),s.timeScale===0&&(v=0),n.timeScalePrev=s.timeScale,n.correction=v,n.frameCounter+=1,a-n.counterTimestamp>=1e3&&(n.fps=n.frameCounter*((a-n.counterTimestamp)/1e3),n.counterTimestamp=a,n.frameCounter=0),l.trigger(n,"tick",C),l.trigger(n,"beforeUpdate",C),r.update(t,p,v),l.trigger(n,"afterUpdate",C),l.trigger(n,"afterTick",C)},e.stop=function(n){o(n.frameRequestId)},e.start=function(n,t){e.run(n,t)}})()},function(A,R,x){var e={};A.exports=e;var l=x(8),r=x(0),i=r.deprecated;(function(){e.collides=function(c,o){return l.collides(c,o)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(A,R,x){var e={};A.exports=e,x(1);var l=x(0);(function(){e.pathToVertices=function(r,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,o,f,n,t,a,s,v,p,C,w=[],u,g,m=0,h=0,S=0;i=i||15;var y=function(d,M,I){var T=I%2===1&&I>1;if(!p||d!=p.x||M!=p.y){p&&T?(u=p.x,g=p.y):(u=0,g=0);var B={x:u+d,y:g+M};(T||!p)&&(p=B),w.push(B),h=u+d,S=g+M}},P=function(d){var M=d.pathSegTypeAsLetter.toUpperCase();if(M!=="Z"){switch(M){case"M":case"L":case"T":case"C":case"S":case"Q":h=d.x,S=d.y;break;case"H":h=d.x;break;case"V":S=d.y;break}y(h,S,d.pathSegType)}};for(e._svgPathToAbsolute(r),f=r.getTotalLength(),a=[],c=0;c<r.pathSegList.numberOfItems;c+=1)a.push(r.pathSegList.getItem(c));for(s=a.concat();m<f;){if(C=r.getPathSegAtLength(m),t=a[C],t!=v){for(;s.length&&s[0]!=t;)P(s.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":n=r.getPointAtLength(m),y(n.x,n.y,0);break}m+=i}for(c=0,o=s.length;c<o;++c)P(s[c]);return w},e._svgPathToAbsolute=function(r){for(var i,c,o,f,n,t,a=r.pathSegList,s=0,v=0,p=a.numberOfItems,C=0;C<p;++C){var w=a.getItem(C),u=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(u))"x"in w&&(s=w.x),"y"in w&&(v=w.y);else switch("x1"in w&&(o=s+w.x1),"x2"in w&&(n=s+w.x2),"y1"in w&&(f=v+w.y1),"y2"in w&&(t=v+w.y2),"x"in w&&(s+=w.x),"y"in w&&(v+=w.y),u){case"m":a.replaceItem(r.createSVGPathSegMovetoAbs(s,v),C);break;case"l":a.replaceItem(r.createSVGPathSegLinetoAbs(s,v),C);break;case"h":a.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(s),C);break;case"v":a.replaceItem(r.createSVGPathSegLinetoVerticalAbs(v),C);break;case"c":a.replaceItem(r.createSVGPathSegCurvetoCubicAbs(s,v,o,f,n,t),C);break;case"s":a.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(s,v,n,t),C);break;case"q":a.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(s,v,o,f),C);break;case"t":a.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(s,v),C);break;case"a":a.replaceItem(r.createSVGPathSegArcAbs(s,v,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),C);break;case"z":case"Z":s=i,v=c;break}(u=="M"||u=="m")&&(i=s,c=v)}}})()},function(A,R,x){var e={};A.exports=e;var l=x(5);x(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(ne);var ge=xe(ne.exports),he={exports:{}};/*!
 * matter-wrap 0.2.0 by Liam Brummitt 2017-07-04
 * https://github.com/liabru/matter-wrap
 * License MIT
 */(function(O,N){(function(R,x){O.exports=x(ne.exports)})(q,function(A){return function(R){var x={};function e(l){if(x[l])return x[l].exports;var r=x[l]={i:l,l:!1,exports:{}};return R[l].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=R,e.c=x,e.i=function(l){return l},e.d=function(l,r,i){e.o(l,r)||Object.defineProperty(l,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(l){var r=l&&l.__esModule?function(){return l.default}:function(){return l};return e.d(r,"a",r),r},e.o=function(l,r){return Object.prototype.hasOwnProperty.call(l,r)},e.p="/libs",e(e.s=1)}([function(R,x){R.exports=A},function(R,x,e){var l=e(0),r={name:"matter-wrap",version:"0.1.3",for:"matter-js@^0.12.0",install:function(c){c.after("Engine.update",function(){r.Engine.update(this)})},Engine:{update:function(c){for(var o=c.world,f=l.Composite.allBodies(o),n=l.Composite.allComposites(o),t=0;t<f.length;t+=1){var a=f[t];a.plugin.wrap&&r.Body.wrap(a,a.plugin.wrap)}for(t=0;t<n.length;t+=1){var s=n[t];s.plugin.wrap&&r.Composite.wrap(s,s.plugin.wrap)}}},Bounds:{wrap:function(c,o){var f=null,n=null;if(typeof o.min.x!="undefined"&&typeof o.max.x!="undefined"&&(c.min.x>o.max.x?f=o.min.x-c.max.x:c.max.x<o.min.x&&(f=o.max.x-c.min.x)),typeof o.min.y!="undefined"&&typeof o.max.y!="undefined"&&(c.min.y>o.max.y?n=o.min.y-c.max.y:c.max.y<o.min.y&&(n=o.max.y-c.min.y)),f!==null||n!==null)return{x:f||0,y:n||0}}},Body:{wrap:function(c,o){var f=r.Bounds.wrap(c.bounds,o);return f&&l.Body.translate(c,f),f}},Composite:{bounds:function(c){for(var o=l.Composite.allBodies(c),f=[],n=0;n<o.length;n+=1){var t=o[n];f.push(t.bounds.min,t.bounds.max)}return l.Bounds.create(f)},wrap:function(c,o){var f=r.Bounds.wrap(r.Composite.bounds(c),o);return f&&l.Composite.translate(c,f),f}}};l.Plugin.register(r),R.exports=r}])})})(he);var Ee=xe(he.exports);const{window:Re}=Te;function Le(O){let N,A,R,x,e,l;return{c(){N=_("div"),A=_("input"),R=Ce(),x=_("canvas"),this.h()},l(r){N=ee(r,"DIV",{class:!0});var i=ue(N);A=ee(i,"INPUT",{accept:!0,type:!0}),i.forEach(X),R=Pe(r),x=ee(r,"CANVAS",{width:!0,height:!0}),ue(x).forEach(X),this.h()},h(){K(A,"accept","image/*"),K(A,"type","file"),K(N,"class","fixed top-0 left-0 mx-4 my-2"),K(x,"width",O[1]),K(x,"height",O[2])},m(r,i){te(r,N,i),Me(N,A),te(r,R,i),te(r,x,i),O[7](x),e||(l=[ce(Re,"resize",O[5]),ce(A,"change",O[6])],e=!0)},p(r,[i]){i&2&&K(x,"width",r[1]),i&4&&K(x,"height",r[2])},i:ve,o:ve,d(r){r&&X(N),r&&X(R),r&&X(x),O[7](null),e=!1,Ie(l)}}}function Fe(O,N,A){let R,x;const{Composite:e,Engine:l,Runner:r,Bodies:i,Mouse:c,MouseConstraint:o}=ge;ge.use(Ee);let f=600,n=600,t,a,s;Ae(()=>{A(4,t=new Image),A(4,t.src="./rock.jpg",t),A(1,f=window.innerWidth),A(2,n=window.innerHeight);const w=l.create(),u=s.getContext("2d");if(u==null)return;const g=c.create(s),m=o.create(w,{mouse:g,constraint:{stiffness:.2,render:{visible:!1}}}),h=i.rectangle(f/2,n,f*2,60,{isStatic:!0}),S=i.rectangle(400,200,R,x,{plugin:{wrap:{min:{x:0,y:0},max:{x:f,y:n}}}});e.add(w.world,[S,m,h]);const y=r.create();r.run(y,w),function P(){const d=e.allBodies(w.world);window.requestAnimationFrame(P),u.fillStyle="#ffffff",u.fillRect(0,0,s.width,s.height);for(const M of d){if(t&&M!==h){u.translate(M.position.x,M.position.y),u.rotate(M.angle),u.drawImage(t,-R/2,-x/2,R,x),u.rotate(-M.angle),u.translate(-M.position.x,-M.position.y);continue}for(const I of M.parts){const T=I.vertices;u.beginPath(),u.moveTo(T[0].x,T[0].y);for(const B of T)u.lineTo(B.x,B.y);u.lineTo(T[0].x,T[0].y),u.closePath(),u.lineWidth=2,u.strokeStyle="rgba(255, 255, 255, 255)",u.globalAlpha=I.render.opacity||1,u.fillStyle=I.render.fillStyle||"#ddd",u.fill()}}}()});const v=()=>{A(1,f=window.innerWidth),A(2,n=window.innerHeight)};function p(){a=this.files,A(0,a)}function C(w){Be[w?"unshift":"push"](()=>{s=w,A(3,s)})}return O.$$.update=()=>{if(O.$$.dirty&1&&a&&a[0]!==null){const w=a[0],u=new Image,g=URL.createObjectURL(w);u.src=g,u.addEventListener("load",()=>{A(4,t=u)})}O.$$.dirty&16&&(R=t&&(t.width>=t.height?100:t.width*100/t.height)||100),O.$$.dirty&16&&(x=t&&(t.height>=t.width?100:t.height*100/t.width)||100)},[a,f,n,s,t,v,p,C]}class Ve extends ye{constructor(N){super(),Se(this,N,Fe,Le,we,{})}}export{Ve as default};
